import { serve } from "https://deno.land/std@0.168.0/http/server.ts";

const corsHeaders = {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Headers': 'authorization, x-client-info, apikey, content-type',
};

// All expected translation keys with their default English values
// Organized by category for clarity
const expectedTranslations: Record<string, { value: string; category: string }> = {
  // Navigation
  "nav.home": { value: "Home", category: "nav" },
  "nav.about": { value: "About", category: "nav" },
  "nav.performance": { value: "Performance", category: "nav" },
  "nav.download": { value: "Download", category: "nav" },
  "nav.contact": { value: "Contact", category: "nav" },
  "nav.trading_modes": { value: "Trading Modes", category: "nav" },
  "nav.auto_mode": { value: "Auto Mode", category: "nav" },
  "nav.auto_mode_desc": { value: "Fully automated 24/7 trading", category: "nav" },
  "nav.hybrid_mode": { value: "Hybrid Mode", category: "nav" },
  "nav.hybrid_mode_desc": { value: "AI signals + manual control", category: "nav" },
  "nav.admin": { value: "Admin", category: "nav" },
  "nav.admin_panel": { value: "Admin Panel", category: "nav" },
  "nav.sign_in": { value: "Sign In", category: "nav" },
  "nav.sign_out": { value: "Sign Out", category: "nav" },

  // Common
  "common.email": { value: "Email", category: "common" },
  "common.password": { value: "Password", category: "common" },
  "common.name": { value: "Name", category: "common" },
  "common.subject": { value: "Subject", category: "common" },
  "common.message": { value: "Message", category: "common" },
  "common.send_message": { value: "Send Message", category: "common" },
  "common.download_now": { value: "Download Now", category: "common" },
  "common.learn_more": { value: "Learn More", category: "common" },
  "common.view_performance": { value: "View Performance", category: "common" },
  "common.contact_support": { value: "Contact Support", category: "common" },
  "common.start_live_chat": { value: "Start Live Chat", category: "common" },

  // Auth
  "auth.title": { value: "Welcome", category: "auth" },
  "auth.subtitle": { value: "Sign in or create an account", category: "auth" },
  "auth.tab.sign_in": { value: "Sign In", category: "auth" },
  "auth.tab.sign_up": { value: "Sign Up", category: "auth" },
  "auth.full_name": { value: "Full Name", category: "auth" },
  "auth.confirm_password": { value: "Confirm Password", category: "auth" },
  "auth.button.sign_in": { value: "Sign In", category: "auth" },
  "auth.button.signing_in": { value: "Signing In...", category: "auth" },
  "auth.button.create_account": { value: "Create Account", category: "auth" },
  "auth.button.creating_account": { value: "Creating Account...", category: "auth" },
  "auth.toast.welcome_back": { value: "Welcome back!", category: "auth" },
  "auth.toast.password_mismatch": { value: "Passwords do not match", category: "auth" },
  "auth.toast.password_short": { value: "Password must be at least 6 characters", category: "auth" },
  "auth.toast.account_created": { value: "Account created successfully!", category: "auth" },

  // Home
  "home.hero.title": { value: "Next Generation", category: "home" },
  "home.hero.title_highlight": { value: "Trading Algorithm", category: "home" },
  "home.hero.description": { value: "Experience the power of AI-driven trading with our proven EA system. Consistent profits, minimal risk, maximum efficiency.", category: "home" },
  "home.stats.win_rate": { value: "Win Rate", category: "home" },
  "home.stats.average_roi": { value: "Average ROI", category: "home" },
  "home.stats.active_traders": { value: "Active Traders", category: "home" },
  "home.stats.support": { value: "Support", category: "home" },
  "home.features.title": { value: "Why Choose Our EA?", category: "home" },
  "home.features.subtitle": { value: "Built with cutting-edge technology and years of market expertise", category: "home" },
  "home.features.lightning_fast": { value: "Lightning Fast", category: "home" },
  "home.features.lightning_fast_desc": { value: "Execute trades in milliseconds with our optimized algorithm", category: "home" },
  "home.features.secure_reliable": { value: "Secure & Reliable", category: "home" },
  "home.features.secure_reliable_desc": { value: "Bank-grade security with 99.9% uptime guarantee", category: "home" },
  "home.features.proven_results": { value: "Proven Results", category: "home" },
  "home.features.proven_results_desc": { value: "Consistent performance across all market conditions", category: "home" },
  "home.features.advanced_analytics": { value: "Advanced Analytics", category: "home" },
  "home.features.advanced_analytics_desc": { value: "Real-time dashboards and detailed performance reports", category: "home" },
  "home.features.award_winning": { value: "Award Winning", category: "home" },
  "home.features.award_winning_desc": { value: "Recognized by industry experts for excellence", category: "home" },
  "home.features.trading_24_7": { value: "24/7 Trading", category: "home" },
  "home.features.trading_24_7_desc": { value: "Never miss an opportunity with round-the-clock operation", category: "home" },
  "home.modes.title": { value: "Choose Your Trading Style", category: "home" },
  "home.modes.subtitle": { value: "Two powerful modes to match your trading preferences", category: "home" },
  "home.modes.auto_title": { value: "Auto Mode", category: "home" },
  "home.modes.auto_desc": { value: "Fully automated trading with AI-powered decision making", category: "home" },
  "home.modes.auto_feature1": { value: "Set and forget operation", category: "home" },
  "home.modes.auto_feature2": { value: "24/7 market monitoring", category: "home" },
  "home.modes.auto_feature3": { value: "Smart risk management", category: "home" },
  "home.modes.hybrid_title": { value: "Hybrid Mode", category: "home" },
  "home.modes.hybrid_desc": { value: "AI signals with manual approval for ultimate control", category: "home" },
  "home.modes.hybrid_feature1": { value: "AI-powered signals", category: "home" },
  "home.modes.hybrid_feature2": { value: "Manual trade approval", category: "home" },
  "home.modes.hybrid_feature3": { value: "Learning opportunity", category: "home" },
  "home.cta.title": { value: "Ready to Start Trading?", category: "home" },
  "home.cta.description": { value: "Join thousands of successful traders using our EA system", category: "home" },
  "home.cta.button": { value: "Download Now", category: "home" },

  // About
  "about.hero.title": { value: "About", category: "about" },
  "about.hero.subtitle": { value: "EA Trading", category: "about" },
  "about.hero.description": { value: "Building the future of algorithmic trading since 2019", category: "about" },
  "about.mission.title": { value: "Our Mission", category: "about" },
  "about.mission.description": { value: "To democratize algorithmic trading and provide every trader with access to professional-grade trading tools that deliver consistent results.", category: "about" },
  "about.story.title": { value: "Our Story", category: "about" },
  "about.story.p1": { value: "Founded in 2019, EA Trading started with a simple goal: create a trading system that works for everyone.", category: "about" },
  "about.story.p2": { value: "Our team of experienced traders and developers combined decades of market knowledge with cutting-edge AI technology.", category: "about" },
  "about.story.p3": { value: "Today, we serve thousands of traders worldwide, helping them achieve their financial goals with our proven EA system.", category: "about" },
  "about.values.title": { value: "Our Values", category: "about" },
  "about.values.trader_focused": { value: "Trader Focused", category: "about" },
  "about.values.trader_focused_desc": { value: "Every feature we build is designed with traders in mind", category: "about" },
  "about.values.results_driven": { value: "Results Driven", category: "about" },
  "about.values.results_driven_desc": { value: "We measure success by your profitability", category: "about" },
  "about.values.innovation_first": { value: "Innovation First", category: "about" },
  "about.values.innovation_first_desc": { value: "Constantly improving our algorithms and technology", category: "about" },
  "about.values.proven_excellence": { value: "Proven Excellence", category: "about" },
  "about.values.proven_excellence_desc": { value: "Track record of consistent performance", category: "about" },
  "about.stats.title": { value: "By the Numbers", category: "about" },
  "about.stats.founded": { value: "Founded", category: "about" },
  "about.stats.active_users": { value: "Active Users", category: "about" },
  "about.stats.traded_volume": { value: "Traded Volume", category: "about" },
  "about.stats.satisfaction": { value: "Satisfaction", category: "about" },

  // Auto Mode
  "auto.hero.title": { value: "Auto Trading Mode", category: "auto" },
  "auto.hero.description": { value: "Let our AI handle everything. Set up once and watch as our algorithm automatically executes profitable trades 24/7.", category: "auto" },
  "auto.hero.button": { value: "Get Started", category: "auto" },
  "auto.how_it_works.title": { value: "How It Works", category: "auto" },
  "auto.how_it_works.step1_title": { value: "Install & Configure", category: "auto" },
  "auto.how_it_works.step1_desc": { value: "Download and install our EA on your MT4/MT5 platform", category: "auto" },
  "auto.how_it_works.step2_title": { value: "Set Parameters", category: "auto" },
  "auto.how_it_works.step2_desc": { value: "Configure your risk settings and trading preferences", category: "auto" },
  "auto.how_it_works.step3_title": { value: "Activate & Profit", category: "auto" },
  "auto.how_it_works.step3_desc": { value: "Turn on auto mode and let the EA handle everything", category: "auto" },
  "auto.features.title": { value: "Key Features", category: "auto" },
  "auto.features.fully_automated": { value: "Fully Automated", category: "auto" },
  "auto.features.fully_automated_desc": { value: "No manual intervention required once configured", category: "auto" },
  "auto.features.24_7_operation": { value: "24/7 Operation", category: "auto" },
  "auto.features.24_7_operation_desc": { value: "Trades around the clock without breaks", category: "auto" },
  "auto.features.risk_management": { value: "Risk Management", category: "auto" },
  "auto.features.risk_management_desc": { value: "Built-in stop loss and take profit mechanisms", category: "auto" },
  "auto.features.real_time_analytics": { value: "Real-time Analytics", category: "auto" },
  "auto.features.real_time_analytics_desc": { value: "Monitor performance with live dashboards", category: "auto" },
  "auto.features.customizable_settings": { value: "Customizable Settings", category: "auto" },
  "auto.features.customizable_settings_desc": { value: "Adjust parameters to match your strategy", category: "auto" },
  "auto.features.proven_strategy": { value: "Proven Strategy", category: "auto" },
  "auto.features.proven_strategy_desc": { value: "Based on years of backtesting and live trading", category: "auto" },
  "auto.benefits.title": { value: "Benefits of Auto Mode", category: "auto" },
  "auto.benefits.description": { value: "Auto mode is perfect for traders who want hands-off operation while maintaining consistent profitability.", category: "auto" },
  "auto.benefits.item1": { value: "No emotional trading decisions", category: "auto" },
  "auto.benefits.item2": { value: "Trade while you sleep or work", category: "auto" },
  "auto.benefits.item3": { value: "Consistent execution of strategy", category: "auto" },
  "auto.benefits.item4": { value: "No technical analysis required", category: "auto" },
  "auto.benefits.item5": { value: "Reduced screen time", category: "auto" },
  "auto.benefits.item6": { value: "Professional-grade results", category: "auto" },
  "auto.stats.win_rate": { value: "Win Rate", category: "auto" },
  "auto.stats.roi": { value: "Average ROI", category: "auto" },
  "auto.stats.trades": { value: "Trades Executed", category: "auto" },
  "auto.cta.title": { value: "Start Auto Trading Today", category: "auto" },
  "auto.cta.description": { value: "Join thousands of traders who have automated their success with our EA", category: "auto" },

  // Hybrid Mode
  "hybrid.hero.title": { value: "Hybrid Trading Mode", category: "hybrid" },
  "hybrid.hero.description": { value: "The best of both worlds. Get AI-powered signals and make the final call yourself. Perfect for learning and maintaining control.", category: "hybrid" },
  "hybrid.hero.button": { value: "Get Started", category: "hybrid" },
  "hybrid.how_it_works.title": { value: "How It Works", category: "hybrid" },
  "hybrid.how_it_works.step1_title": { value: "AI Analysis", category: "hybrid" },
  "hybrid.how_it_works.step1_desc": { value: "Our AI constantly monitors the market for opportunities", category: "hybrid" },
  "hybrid.how_it_works.step2_title": { value: "Signal Alert", category: "hybrid" },
  "hybrid.how_it_works.step2_desc": { value: "Receive instant notifications with trade recommendations", category: "hybrid" },
  "hybrid.how_it_works.step3_title": { value: "Your Decision", category: "hybrid" },
  "hybrid.how_it_works.step3_desc": { value: "Review the analysis and approve or skip the trade", category: "hybrid" },
  "hybrid.how_it_works.step4_title": { value: "Execute & Learn", category: "hybrid" },
  "hybrid.how_it_works.step4_desc": { value: "One-click execution and track your results", category: "hybrid" },
  "hybrid.features.title": { value: "Key Features", category: "hybrid" },
  "hybrid.features.ai_signals": { value: "AI Signals", category: "hybrid" },
  "hybrid.features.ai_signals_desc": { value: "Advanced algorithms identify high-probability setups", category: "hybrid" },
  "hybrid.features.manual_approval": { value: "Manual Approval", category: "hybrid" },
  "hybrid.features.manual_approval_desc": { value: "You maintain control over every trade", category: "hybrid" },
  "hybrid.features.real_time_alerts": { value: "Real-time Alerts", category: "hybrid" },
  "hybrid.features.real_time_alerts_desc": { value: "Never miss an opportunity with instant notifications", category: "hybrid" },
  "hybrid.features.smart_recommendations": { value: "Smart Recommendations", category: "hybrid" },
  "hybrid.features.smart_recommendations_desc": { value: "Detailed analysis with entry, stop loss, and take profit", category: "hybrid" },
  "hybrid.features.learning_mode": { value: "Learning Mode", category: "hybrid" },
  "hybrid.features.learning_mode_desc": { value: "Understand why trades are recommended", category: "hybrid" },
  "hybrid.features.flexible_control": { value: "Flexible Control", category: "hybrid" },
  "hybrid.features.flexible_control_desc": { value: "Switch between manual and semi-auto anytime", category: "hybrid" },
  "hybrid.benefits.title": { value: "Why Choose Hybrid Mode?", category: "hybrid" },
  "hybrid.benefits.description": { value: "Hybrid mode combines AI intelligence with human judgment for optimal results.", category: "hybrid" },
  "hybrid.benefits.item1": { value: "Learn professional trading strategies", category: "hybrid" },
  "hybrid.benefits.item2": { value: "Maintain full control over your capital", category: "hybrid" },
  "hybrid.benefits.item3": { value: "Build confidence in trading decisions", category: "hybrid" },
  "hybrid.benefits.item4": { value: "Skip uncertain market conditions", category: "hybrid" },
  "hybrid.benefits.item5": { value: "Customize your trading approach", category: "hybrid" },
  "hybrid.benefits.item6": { value: "Combine AI insights with personal analysis", category: "hybrid" },
  "hybrid.stats.signal_accuracy": { value: "Signal Accuracy", category: "hybrid" },
  "hybrid.stats.user_satisfaction": { value: "User Satisfaction", category: "hybrid" },
  "hybrid.stats.time_saved": { value: "Time Saved", category: "hybrid" },
  "hybrid.perfect_for.title": { value: "Perfect For", category: "hybrid" },
  "hybrid.perfect_for.learning_traders": { value: "Learning Traders", category: "hybrid" },
  "hybrid.perfect_for.learning_traders_desc": { value: "Understand market dynamics while getting expert guidance", category: "hybrid" },
  "hybrid.perfect_for.part_time_traders": { value: "Part-time Traders", category: "hybrid" },
  "hybrid.perfect_for.part_time_traders_desc": { value: "Trade efficiently without constant market monitoring", category: "hybrid" },
  "hybrid.perfect_for.risk_conscious_traders": { value: "Risk-conscious Traders", category: "hybrid" },
  "hybrid.perfect_for.risk_conscious_traders_desc": { value: "Review every trade before execution", category: "hybrid" },
  "hybrid.cta.title": { value: "Try Hybrid Mode Today", category: "hybrid" },
  "hybrid.cta.description": { value: "Experience the perfect balance of AI intelligence and human control", category: "hybrid" },

  // Performance
  "performance.hero.title": { value: "Performance Results", category: "performance" },
  "performance.hero.description": { value: "Transparent, verified results from our live trading accounts. See the power of our EA in action.", category: "performance" },
  "performance.metrics.win_rate": { value: "Win Rate", category: "performance" },
  "performance.metrics.avg_monthly": { value: "Avg Monthly", category: "performance" },
  "performance.metrics.profit_factor": { value: "Profit Factor", category: "performance" },
  "performance.metrics.max_drawdown": { value: "Max Drawdown", category: "performance" },
  "performance.tabs.live_results": { value: "Live Results", category: "performance" },
  "performance.tabs.backtest_data": { value: "Backtest Data", category: "performance" },
  "performance.live.title": { value: "Monthly Performance", category: "performance" },
  "performance.live.subtitle": { value: "Results from our live trading accounts", category: "performance" },
  "performance.live.trades": { value: "trades", category: "performance" },
  "performance.live.win_rate": { value: "win rate", category: "performance" },
  "performance.backtest.title": { value: "Historical Backtest", category: "performance" },
  "performance.backtest.subtitle": { value: "Comprehensive testing period:", category: "performance" },
  "performance.backtest.test_period": { value: "Test Period", category: "performance" },
  "performance.backtest.total_trades": { value: "Total Trades", category: "performance" },
  "performance.backtest.average_profit": { value: "Average Profit", category: "performance" },
  "performance.methodology.title": { value: "Testing Methodology", category: "performance" },
  "performance.methodology.item1": { value: "Real tick data from multiple brokers", category: "performance" },
  "performance.methodology.item2": { value: "Includes spreads, commissions, and slippage", category: "performance" },
  "performance.methodology.item3": { value: "Monte Carlo simulation for stress testing", category: "performance" },
  "performance.methodology.item4": { value: "Walk-forward optimization", category: "performance" },
  "performance.methodology.item5": { value: "Cross-validation across market conditions", category: "performance" },
  "performance.disclaimer_label": { value: "Disclaimer:", category: "performance" },
  "performance.disclaimer": { value: "Past performance is not indicative of future results. Trading involves significant risk of loss.", category: "performance" },

  // Download
  "download.hero.title": { value: "Download EA", category: "download" },
  "download.hero.description": { value: "Get started with our professional trading system in minutes", category: "download" },
  "download.files.mt4_title": { value: "EA for MetaTrader 4", category: "download" },
  "download.files.mt4_desc": { value: "Compatible with all MT4 brokers", category: "download" },
  "download.files.mt5_title": { value: "EA for MetaTrader 5", category: "download" },
  "download.files.mt5_desc": { value: "Enhanced features for MT5 platform", category: "download" },
  "download.files.manual_title": { value: "User Manual", category: "download" },
  "download.files.manual_desc": { value: "Complete guide and documentation", category: "download" },
  "download.files.version": { value: "Version", category: "download" },
  "download.files.size": { value: "Size", category: "download" },
  "download.requirements.title": { value: "System Requirements", category: "download" },
  "download.requirements.subtitle": { value: "Make sure your system meets these requirements", category: "download" },
  "download.requirements.item1": { value: "MetaTrader 4 or MetaTrader 5 platform", category: "download" },
  "download.requirements.item2": { value: "Stable internet connection", category: "download" },
  "download.requirements.item3": { value: "Minimum $500 account balance recommended", category: "download" },
  "download.requirements.item4": { value: "VPS recommended for 24/7 operation", category: "download" },
  "download.requirements.item5": { value: "Compatible with most forex brokers", category: "download" },
  "download.installation.title": { value: "Installation Steps", category: "download" },
  "download.installation.step1_title": { value: "Download", category: "download" },
  "download.installation.step1_desc": { value: "Download the EA file for your platform (MT4 or MT5)", category: "download" },
  "download.installation.step2_title": { value: "Open Data Folder", category: "download" },
  "download.installation.step2_desc": { value: "In MetaTrader, go to File > Open Data Folder > MQL4/MQL5 > Experts", category: "download" },
  "download.installation.step3_title": { value: "Copy Files", category: "download" },
  "download.installation.step3_desc": { value: "Copy the downloaded EA file into the Experts folder", category: "download" },
  "download.installation.step4_title": { value: "Restart Platform", category: "download" },
  "download.installation.step4_desc": { value: "Restart MetaTrader to load the new EA", category: "download" },
  "download.installation.step5_title": { value: "Activate", category: "download" },
  "download.installation.step5_desc": { value: "Drag the EA to your chart and configure settings", category: "download" },
  "download.support.title": { value: "Need Help?", category: "download" },
  "download.support.description": { value: "Our support team is available 24/7 to assist with installation and setup", category: "download" },

  // Contact
  "contact.hero.title": { value: "Contact Us", category: "contact" },
  "contact.hero.description": { value: "We're here to help. Reach out to us anytime.", category: "contact" },
  "contact.info.email": { value: "Email", category: "contact" },
  "contact.info.email_desc": { value: "We'll respond within 24 hours", category: "contact" },
  "contact.info.phone": { value: "Phone", category: "contact" },
  "contact.info.phone_desc": { value: "Mon-Fri 9am-6pm EST", category: "contact" },
  "contact.info.office": { value: "Office", category: "contact" },
  "contact.info.live_chat": { value: "Live Chat", category: "contact" },
  "contact.info.live_chat_content": { value: "Available 24/7", category: "contact" },
  "contact.info.live_chat_desc": { value: "Get instant support from our team", category: "contact" },
  "contact.form.title": { value: "Send us a Message", category: "contact" },
  "contact.form.subtitle": { value: "Fill out the form below and we'll get back to you", category: "contact" },
  "contact.form.name_placeholder": { value: "Your name", category: "contact" },
  "contact.form.email_placeholder": { value: "your@email.com", category: "contact" },
  "contact.form.subject_placeholder": { value: "How can we help?", category: "contact" },
  "contact.form.message_placeholder": { value: "Tell us more about your inquiry...", category: "contact" },
  "contact.faq.title": { value: "FAQ", category: "contact" },
  "contact.faq.q1": { value: "How long does installation take?", category: "contact" },
  "contact.faq.a1": { value: "Installation typically takes less than 5 minutes. Our support team can assist if needed.", category: "contact" },
  "contact.faq.q2": { value: "What brokers are supported?", category: "contact" },
  "contact.faq.a2": { value: "Our EA works with most MT4/MT5 brokers. Contact us for specific broker compatibility.", category: "contact" },
  "contact.faq.q3": { value: "Is there a trial period?", category: "contact" },
  "contact.faq.a3": { value: "Yes, we offer a 14-day trial to test the EA on a demo account.", category: "contact" },
  "contact.urgent.title": { value: "Need Urgent Help?", category: "contact" },
  "contact.urgent.description": { value: "For urgent matters, our live chat is available 24/7", category: "contact" },

  // Updates (Facebook section)
  "updates.hero.title": { value: "Latest Updates", category: "updates" },
  "updates.hero.description": { value: "Follow us for news and updates", category: "updates" },
  "updates.visit_page": { value: "Visit our Facebook page", category: "updates" },
};

serve(async (req) => {
  if (req.method === 'OPTIONS') {
    return new Response(null, { headers: corsHeaders });
  }

  try {
    console.log('Returning expected translations, total keys:', Object.keys(expectedTranslations).length);
    
    return new Response(
      JSON.stringify({ translations: expectedTranslations }),
      { headers: { ...corsHeaders, 'Content-Type': 'application/json' } }
    );
  } catch (error) {
    console.error('Error in get-expected-translations:', error);
    return new Response(
      JSON.stringify({ error: error instanceof Error ? error.message : 'Failed to get expected translations' }),
      { status: 500, headers: { ...corsHeaders, 'Content-Type': 'application/json' } }
    );
  }
});
